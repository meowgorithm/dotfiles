#!/bin/bash

THISDIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
DROPBOX=$HOME/Soft\ Power\ Dropbox/Christian\ Rocha

if [[ -z $XDG_CONFIG_HOME ]]; then
    XDG_CONFIG_HOME="$HOME/.config"
fi
mkdir -p "$XDG_CONFIG_HOME/{kitty,yabai}"

function link() {
    rm -rf "${HOME:?}/$1"
    ln -s "$THISDIR/$2" "$HOME/$1"
}

mkdir -p "$HOME/Library/LaunchAgents"
link Library/LaunchAgents/is.rocha.env.plist Library/LaunchAgents/is.rocha.env.plist

link .bashrc bashrc
link .bash_profile bash_profile
link .gitconfig gitconfig
link .gitignore gitignore
link .config/kitty/kitty.conf kitty.conf
link .gemrc gemrc
link .eslintrc eslintrc
link .tmux.conf tmux.conf
link .grc .grc
link .config/.floskell.json floskell.json
link .hindent.yaml hindent.yaml
link .config/fish config/fish
link .nixpkgs nixpkgs
link .config/yabai/yabairc yabairc
link .skhdrc skhdrc

# XCode Themes
XCODE_THEMES="$HOME/Library/Developer/Xcode/UserData/FontAndColorThemes"
rm -rf "$XCODE_THEMES"
mkdir -p "$XCODE_THEMES"
ln -s "$THISDIR/xcode/Meowgorithm.dvtcolortheme" "$XCODE_THEMES/Meowgorithm.dvtcolortheme"
ln -s "$HOME/xcode/MeowgorithmMorning.dvtcolortheme" "$XCODE_THEMES/MeowgorithmMorning.dvtcolortheme"

gpg --decrypt ./macos/extra.gpg | bash

echo
echo Done.
echo
